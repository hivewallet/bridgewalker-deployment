Upgrade to wheezy (currently 'testing')

Install MtGoxCachingProxy
  required packages:
    openjdk-7-jre

Install bitcoind
  configuration in /home/jan/.bitcoin/bitcoin.conf :
    server=1
    rpcuser=...
    rpcpassword=...
  required packages:
    libboost-system1.49.0
    libboost-filesystem1.49.0
    libboost-program-options1.49.0
    libboost-thread1.49.0
    libdb5.1++

Install pidnotifier
  as /home/jan/.bitcoin/pidnotifier

Install PostgresSQL
  packages: postgresql, sudo
  create Bridgewalker database:
    sudo -u postgres bash
    createuser jan
    createdb -O jan bridgewalker

Install bridgewalker
  compile binary, make sure snap-server is compiled with SSL:
    cabal install snap-server -fopenssl
  upload binary + folders (log/, static/, snaplets/)
  configuration in /home/jan/.bridgewalker/
  compile CreateDB tool:
    ghc -main-is Tools.CreateDB --make Tools/CreateDB.hs
  use CreateDB to initialize tables

Install nginx
  requires Websocket support in Nginx (since 1.3.13)
  if not available as package, compile on development machine:
    ./configure --with-http_ssl_module --prefix=/opt/nginx && make
  create tarball from directory and upload to server (timestamps need to be in
    correct order so that 'make' is not confused)
  install package 'make', do 'make install' as root
  create /opt/nginx/pid
  create /opt/nginx/conf/certs
    copy bridgewalker-unified.crt and bridgewalker.key there
  configuration in /opt/nginx/conf/nginx.conf
  edit /etc/rc.local and add (before 'exit 0') this line:
    /opt/nginx/sbin/nginx
  configuration for logrotate in /etc/logrotate.d/optnginx

Install supervisor
  configuration in /etc/supervisor/conf.d/{bridgewalker, ...}.conf
  reload with:
    # supervisorctl
    reload
    status

Configure backup
  create bwbackup user on backup server
  allow root to log into backup server
    ssh-keygen -t dsa
    ssh-copy-id bwbackup@bitcoinmonitor.com

  install backupninja
    edit /etc/backupninja.conf
    create /var/backups/backupninja
    create /var/backups/backupninja/bitcoind
    chown jan:jan /var/backups/backupninja/bitcoind
    create /etc/backup.d/10-bitcoind.sh; restrict permissions
    create /etc/backup.d/20-postgresql.pgsql
    create /etc/backup.d/90-off-site.dup
      insert password
    test with 'backupninja -t'

  install postfix
    during configuration:
      Satellite system
      System mail name: bridgewalkerapp.com
      SMTP relay host: [smtp.gmail.com]:587
    add additional options for gmail relayhost
      smtp_use_tls=yes
      smtp_sasl_auth_enable = yes
      smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
      smtp_tls_CAfile = /etc/ssl/certs/ca-certificates.crt
      smtp_sasl_security_options =
    create /etc/postfix/sasl_passwd
      [smtp.gmail.com]:587  user@gmail.com:password
    postmap /etc/postfix/sasl_passwd
    restrict permissions; chown postfix:postfix sasl_passwd*
    log into GMail and dismiss triggered warnings

#graveyard
Install haproxy
  configuration in /etc/haproxy/haproxy.cfg
  needs to be enabled in /etc/default/haproxy
  configure rsyslogd for UDP logging: /etc/rsyslog.d/haproxy.conf
